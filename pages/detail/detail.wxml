<!--pages/detail/detail.wxml-->
<view class="container {{currentTheme && currentTheme.key ? currentTheme.key + '-theme' : 'classic-theme'}}" wx:if="{{birthday}}">
  <!-- é¡¶éƒ¨åŒºåŸŸ -->
  <view class="header-section">
    <view class="header-card">
    <view class="countdown-section">
      <view class="countdown-circle">
        <view class="countdown-number">{{birthday.daysLeft}}</view>
        <view class="countdown-text">å¤©</view>
      </view>
      <view class="countdown-info">
        <view class="name">{{birthday.name}}</view>
        <view class="date">{{birthday.year}}å¹´{{birthday.month}}æœˆ{{birthday.day}}æ—¥</view>
        <view class="lunar-info">{{birthday.type === 'lunar' ? 'å†œå†' : 'å…¬å†'}}</view>
        <view class="distance">è·ç¦»ç”Ÿæ—¥è¿˜æœ‰{{birthday.daysLeft}}å¤©</view>
        <view class="blessing">{{birthday.blessing || 'æ„¿ä½ å²å²å¹³å®‰ï¼Œå¹´å¹´æœ‰ä»Šæ—¥'}}</view>
      </view>
    </view>
    </view>
  </view>

  <!-- å†…å®¹åŒºåŸŸ -->
  <view class="content-wrapper">
    <!-- åŸºæœ¬ä¿¡æ¯ -->
  <view class="info-card">
    <view class="card-title">ğŸ“‹ åŸºæœ¬ä¿¡æ¯</view>
    
    <view class="info-row">
      <view class="info-label">å§“å</view>
      <view class="info-value">{{birthday.name}}</view>
    </view>
    
    <view class="info-row">
      <view class="info-label">æ ‡ç­¾</view>
      <view class="info-value">
        <view class="tag" wx:for="{{birthday.tags}}" wx:key="index">{{item}}</view>
        <view class="tag" wx:if="{{!birthday.tags || birthday.tags.length === 0}}">æœ‹å‹</view>
      </view>
    </view>
  </view>

  <!-- å‡ºç”Ÿæ—¥æœŸä¿¡æ¯ -->
  <view class="info-card">
    <view class="card-title">ğŸ‚ å‡ºç”Ÿæ—¥æœŸ</view>
    
    <view class="date-grid">
      <view class="date-item">
        <view class="date-type">{{birthday.type === 'lunar' ? 'å†œå†' : 'å…¬å†'}}</view>
        <view class="date-value">{{birthday.year}}å¹´{{birthday.month}}æœˆ{{birthday.day}}æ—¥</view>
      </view>
      
      <view class="date-item" wx:if="{{birthday.type === 'lunar'}}">
        <view class="date-type">å¯¹åº”å…¬å†</view>
        <view class="date-value">{{birthday.solarDate}}</view>
      </view>
    </view>
  </view>

  <!-- æ˜Ÿåº§ç”Ÿè‚–ä¿¡æ¯ -->
  <view class="info-card">
    <view class="card-title">ğŸŒŸ æ˜Ÿåº§ç”Ÿè‚–</view>
    
    <view class="zodiac-grid">
      <view class="zodiac-item">
        <view class="zodiac-icon">â™’</view>
        <view class="zodiac-info">
          <view class="zodiac-label">æ˜Ÿåº§</view>
          <view class="zodiac-value">{{birthday.constellation}}</view>
        </view>
      </view>
      
      <view class="zodiac-item">
        <view class="zodiac-icon">ğŸ·</view>
        <view class="zodiac-info">
          <view class="zodiac-label">ç”Ÿè‚–</view>
          <view class="zodiac-value">{{birthday.zodiac}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¹´é¾„ä¿¡æ¯ -->
  <view class="info-card">
    <view class="card-title">ğŸ“… å¹´é¾„ä¿¡æ¯</view>
    
    <view class="age-info">
      <view class="age-row">
        <view class="age-label">å½“å‰å¹´é¾„</view>
        <view class="age-value">{{birthday.currentAge}}å²</view>
      </view>
      
      <view class="age-row">
        <view class="age-label">ä¸‹æ¬¡ç”Ÿæ—¥</view>
        <view class="age-value">{{birthday.nextBirthdayAge}}å²</view>
      </view>
    </view>
  </view>


  </view>
</view>

<!-- åº•éƒ¨æ¸©é¦¨æ“ä½œæŒ‰é’® -->
<view class="birthday-actions" wx:if="{{birthday}}">
  <view class="birthday-actions-inner">
    <button class="birthday-btn home-btn" bindtap="goBack">
      <view class="btn-emoji">ğŸ </view>
      <view class="btn-label">è¿”å›</view>
<!--      <view class="btn-subtitle">è¿”å›ç”Ÿæ—¥åˆ—è¡¨</view>-->
    </button>

    <button class="birthday-btn care-btn" bindtap="editBirthday">
      <view class="btn-emoji">ğŸ’</view>
      <view class="btn-label">ç¼–è¾‘ä¿¡æ¯</view>
<!--      <view class="btn-subtitle">æ›´æ–°ç”Ÿæ—¥ä¿¡æ¯</view>-->
    </button>

    <button class="birthday-btn farewell-btn" bindtap="deleteBirthday">
      <view class="btn-emoji">ğŸ‘‹</view>
      <view class="btn-label">åˆ é™¤è®°å½•</view>
<!--      <view class="btn-subtitle">åˆ é™¤æ­¤ç”Ÿæ—¥</view>-->
    </button>
  </view>
</view>

<view class="empty-state" wx:else>
  <view class="empty-text">ç”Ÿæ—¥ä¿¡æ¯ä¸å­˜åœ¨</view>
  <button class="btn-primary" bindtap="navigateBack">è¿”å›</button>
</view>